<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>venky — Book Tickets</title>
  <style>
    :root{
      --accent:#ff3b3b; --muted:#6b7280; --bg:#071428; --card:#071726;
      font-family:Inter,system-ui,-apple-system,'Segoe UI',Roboto,Arial;
    }
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#071428 0%, #081025 100%);color:#e6eef8}
    .wrap{max-width:1100px;margin:18px auto;padding:16px}
    header{display:flex;align-items:center;gap:12px}
    .brand{font-weight:800;font-size:1.5rem;color:var(--accent)}
    .controls{margin-left:auto;display:flex;gap:8px;align-items:center}
    select,input{padding:8px 10px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit}
    button.btn{background:linear-gradient(90deg,var(--accent),#ff8b8b);border:none;padding:9px 12px;border-radius:10px;font-weight:700;color:#071021;cursor:pointer}
    nav.top-actions{display:flex;gap:10px;align-items:center}
    .hero{display:grid;grid-template-columns:1fr 360px;gap:16px;margin-top:16px}
    .card{background:linear-gradient(180deg, rgba(255,255,255,0.02), transparent);border-radius:12px;padding:14px;box-shadow:0 10px 30px rgba(2,6,23,0.6)}
    .filters{display:flex;gap:8px;margin-top:10px;flex-wrap:wrap}
    .movies-grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:12px;margin-top:12px}
    .movie{border-radius:10px;overflow:hidden;cursor:pointer;transition:transform .14s}
    .movie:hover{transform:translateY(-6px)}
    .movie img{width:100%;height:220px;object-fit:cover;display:block}
    .meta{padding:8px}
    .meta h4{margin:0 0 6px 0;font-size:0.95rem}
    .meta p{margin:0;color:var(--muted);font-size:0.8rem}
    aside.booking{position:sticky;top:24px}
    .showtimes{display:flex;flex-wrap:wrap;gap:8px;margin-top:10px}
    .showtime{padding:8px 10px;border-radius:8px;background:rgba(255,255,255,0.03);cursor:pointer}
    .showtime.selected{background:var(--accent);color:#071021}
    .seat-map{display:grid;grid-template-columns:repeat(8,36px);gap:8px;justify-content:center;padding:10px}
    .seat{height:36px;width:36px;border-radius:6px;background:#061226;border:1px solid rgba(255,255,255,0.04);display:flex;align-items:center;justify-content:center;font-size:0.75rem;color:var(--muted);cursor:pointer}
    .seat.vip{background:linear-gradient(180deg,#6b3b9b,#7c53c6);color:#fff}
    .seat.taken{background:#2b2b2b;color:#777;cursor:not-allowed}
    .seat.selected{background:var(--accent);color:#071021}
    .small{font-size:0.82rem;color:var(--muted)}
    .offers{display:flex;gap:8px;overflow:auto;padding:8px 0}
    .offer{min-width:200px;padding:10px;border-radius:8px;background:linear-gradient(90deg,#0b1530,#0f1b36);border:1px solid rgba(255,255,255,0.03)}
    footer{margin-top:18px;text-align:center;color:var(--muted);font-size:0.85rem}

    /* modal */
    .modal-back{position:fixed;inset:0;background:rgba(2,6,23,0.7);display:none;align-items:center;justify-content:center;padding:18px}
    .modal{background:var(--card);padding:18px;border-radius:12px;min-width:320px;max-width:420px}
    .row{display:flex;gap:8px;align-items:center}
    @media(max-width:980px){.hero{grid-template-columns:1fr}.movie img{height:160px}.booking{position:relative;top:auto}}
  </style>
</head>
<body>
  <div class="wrap">
    <header>
      <div class="brand">venky</div>

      <nav class="top-actions controls">
        <select id="city">
          <option>Mumbai</option><option>Hyderabad</option><option>Bengaluru</option><option>Chennai</option><option>Delhi</option>
        </select>
        <input id="search" placeholder="Search movie / theatre / event..." />
        <button class="btn" id="signinBtn">Sign in</button>
      </nav>
    </header>

    <section class="hero">
      <!-- Left: movies + filters -->
      <div>
        <div class="card">
          <div style="display:flex;align-items:center;justify-content:space-between">
            <div>
              <h2 style="margin:0">Now showing</h2>
              <div class="small">Choose city, filter by genre, and quick-book.</div>
            </div>
            <div style="min-width:220px">
              <div class="filters">
                <select id="genreFilter"><option value="">All Genres</option><option>Action</option><option>Drama</option><option>Romance</option><option>Thriller</option><option>Musical</option></select>
                <select id="sortBy"><option value="pop">Sort: Popular</option><option value="time">Sort: Time</option></select>
              </div>
            </div>
          </div>

          <div class="offers" id="offers">
            <div class="offer"><strong>Early Bird</strong><div class="small">10% off on morning shows</div></div>
            <div class="offer"><strong>Student Offer</strong><div class="small">Flat ₹50 off — student verification required</div></div>
            <div class="offer"><strong>Combo Deals</strong><div class="small">Popcorn + Cold drink at ₹99</div></div>
          </div>

          <div class="movies-grid" id="movies"></div>
        </div>

        <div class="card" style="margin-top:12px">
          <h3 style="margin:0">Upcoming Events</h3>
          <p class="small" style="margin-top:8px">Theatre plays, concerts and more — add events here when integrating backend.</p>
        </div>
      </div>

      <!-- Right: booking panel -->
      <aside class="card booking" id="bookingPanel">
        <h3 id="movieTitle">Select a movie</h3>
        <div id="poster" style="height:160px;border-radius:8px;background:linear-gradient(90deg,#071021,#0b1530);display:flex;align-items:center;justify-content:center;color:var(--muted)">Poster</div>

        <div style="margin-top:10px">
          <div class="small">Showtimes</div>
          <div class="showtimes" id="showtimes"></div>
        </div>

        <div style="margin-top:12px">
          <strong>Choose seats</strong>
          <div class="seat-map" id="seatMap"></div>
          <div id="summary" class="small" style="margin-top:8px">No seats selected</div>
          <div style="margin-top:10px"><button class="btn" id="pay">Proceed to Pay</button></div>
        </div>

        <div style="margin-top:12px">
          <h4 style="margin:0 0 6px 0">Your Bookings</h4>
          <div id="bookHistory" class="small">No bookings yet — after payment you'll see booking entries here.</div>
        </div>
      </aside>
    </section>

    <footer>
      Demo: venky — static front-end. Replace demo data with APIs for real bookings & payment integrations.
    </footer>
  </div>

  <!-- Sign-in modal -->
  <div class="modal-back" id="modalBack">
    <div class="modal">
      <h3>Sign in to venky</h3>
      <div style="margin-top:8px">
        <input id="email" placeholder="Email" style="width:100%;margin-bottom:8px;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit" />
        <input id="pwd" placeholder="Password" type="password" style="width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:transparent;color:inherit" />
        <div style="display:flex;justify-content:flex-end;gap:8px;margin-top:10px">
          <button class="btn" id="doSignIn">Sign in</button>
          <button id="closeModal" style="padding:8px 12px;border-radius:8px;background:transparent;border:1px solid rgba(255,255,255,0.06);color:var(--muted)">Cancel</button>
        </div>
      </div>
    </div>
  </div>

  <script>
    // Demo movies dataset (replace with real API)
    const moviesData = [
      {id:1,title:'Aether: The Lost City',genre:'Action',duration:'2h 15m',img:'https://images.unsplash.com/photo-1517604931442-5f3b8c0f0aa4?auto=format&fit=crop&w=800&q=60'},
      {id:2,title:'Love in September',genre:'Romance',duration:'2h 05m',img:'https://images.unsplash.com/photo-1505685296765-3a2736de412f?auto=format&fit=crop&w=800&q=60'},
      {id:3,title:'Midnight Heist',genre:'Thriller',duration:'1h 50m',img:'https://images.unsplash.com/photo-1515879218367-8466d910aaa4?auto=format&fit=crop&w=800&q=60'},
      {id:4,title:'The Last Symphony',genre:'Musical',duration:'2h 30m',img:'https://images.unsplash.com/photo-1511379938547-c1f69419868d?auto=format&fit=crop&w=800&q=60'},
      {id:5,title:'Small Town Stories',genre:'Drama',duration:'2h 10m',img:'https://images.unsplash.com/photo-1489599849927-2ee91cede3ba?auto=format&fit=crop&w=800&q=60'}
    ];

    const moviesEl = document.getElementById('movies');
    const showtimesEl = document.getElementById('showtimes');
    const posterEl = document.getElementById('poster');
    const movieTitleEl = document.getElementById('movieTitle');
    const seatMapEl = document.getElementById('seatMap');
    const summaryEl = document.getElementById('summary');
    const payBtn = document.getElementById('pay');
    const bookHistory = document.getElementById('bookHistory');

    let selectedMovie = null;
    let selectedShow = null;
    let selectedSeats = new Set();
    let bookings = [];

    function renderMovies(list){
      moviesEl.innerHTML='';
      list.forEach(m=>{
        const d = document.createElement('div'); d.className='movie card';
        d.innerHTML = `<img src="${m.img}" alt="${m.title}" /><div class="meta"><h4>${m.title}</h4><p>${m.genre} • ${m.duration}</p><div style="margin-top:8px"><button class="btn" data-id="${m.id}">Quick Book</button></div></div>`;
        d.querySelector('button').onclick = (e)=>{ e.stopPropagation(); selectMovie(m); selectShowAndOpen(m,'7:30 PM') };
        d.onclick = ()=> selectMovie(m);
        moviesEl.appendChild(d);
      })
    }

    function selectMovie(m){
      selectedMovie = m;
      movieTitleEl.textContent = m.title;
      posterEl.innerHTML = `<img src="${m.img}" style="width:100%;height:100%;object-fit:cover;border-radius:8px" alt="poster">`;
      renderShowtimes();
      resetSeats();
    }

    function renderShowtimes(){
      showtimesEl.innerHTML='';
      const times = ['10:30 AM','1:45 PM','4:30 PM','7:30 PM','10:45 PM'];
      times.forEach(t=>{
        const el = document.createElement('div'); el.className='showtime'; el.textContent = t;
        el.onclick = ()=>{ document.querySelectorAll('.showtime').forEach(s=>s.classList.remove('selected')); el.classList.add('selected'); selectedShow=t; resetSeats(); };
        showtimesEl.appendChild(el);
      })
    }

    function selectShowAndOpen(m,t){
      selectMovie(m);
      // wait for showtimes to render
      setTimeout(()=>{
        const all = Array.from(document.querySelectorAll('.showtime'));
        const match = all.find(x=>x.textContent===t);
        if(match){ match.classList.add('selected'); selectedShow=t; }
        window.scrollTo({top:document.body.scrollHeight,behavior:'smooth'});
      },60);
    }

    function resetSeats(){
      selectedSeats.clear();
      seatMapEl.innerHTML='';
      summaryEl.textContent='No seats selected';
      const rows = 6, cols = 8;
      for(let r=0;r<rows;r++){
        for(let c=0;c<cols;c++){
          const s = document.createElement('div'); s.className='seat';
          if(r===0) s.classList.add('vip');
          if(Math.random()<0.12) s.classList.add('taken');
          s.textContent = String.fromCharCode(65+r) + (c+1);
          s.onclick = ()=> {
            if(s.classList.contains('taken')) return;
            if(selectedSeats.has(s.textContent)){ selectedSeats.delete(s.textContent); s.classList.remove('selected') }
            else { selectedSeats.add(s.textContent); s.classList.add('selected') }
            updateSummary();
          }
          seatMapEl.appendChild(s);
        }
      }
    }

    function updateSummary(){
      if(selectedSeats.size===0){ summaryEl.textContent='No seats selected'; return; }
      const arr = Array.from(selectedSeats).sort();
      let total=0;
      arr.forEach(a=> total += a[0]==='A' ? 300 : 200);
      summaryEl.innerHTML = `Selected (<strong>${arr.length}</strong>): ${arr.join(', ')} <br/> Total: ₹ <strong>${total}</strong>`;
    }

    payBtn.onclick = ()=>{
      if(!selectedMovie){ alert('Select a movie'); return; }
      if(!selectedShow){ alert('Pick a showtime'); return; }
      if(selectedSeats.size===0){ alert('Choose seats'); return; }
      // Demo checkout: save booking locally
      const seats = Array.from(selectedSeats).sort();
      const total = seats.reduce((acc,s)=> acc + (s[0]==='A' ? 300 : 200), 0);
      const booking = {id:Date.now(), movie:selectedMovie.title, show:selectedShow, seats, total, city:document.getElementById('city').value};
      bookings.push(booking);
      updateHistory();
      alert('Demo checkout successful — booking saved locally. Integrate payment gateway/server to persist bookings.');
      // clear selection after booking
      selectedSeats.clear(); resetSeats(); summaryEl.textContent='No seats selected';
    }

    function updateHistory(){
      if(bookings.length===0){ bookHistory.textContent='No bookings yet'; return; }
      bookHistory.innerHTML = bookings.slice(-5).reverse().map(b=>`<div style="margin-bottom:8px"><strong>${b.movie}</strong> — ${b.show} — ${b.seats.join(', ')} — ₹${b.total}</div>`).join('');
    }

    // Search & filters
    document.getElementById('search').addEventListener('input', e=>{
      const q = e.target.value.toLowerCase();
      const filtered = moviesData.filter(m=> (m.title + m.genre).toLowerCase().includes(q));
      renderMovies(filtered);
    });
    document.getElementById('genreFilter').addEventListener('change', e=>{
      const g = e.target.value;
      const filtered = g ? moviesData.filter(m=> m.genre===g) : moviesData;
      renderMovies(filtered);
    });

    // Sign-in modal handlers (demo)
    const modal = document.getElementById('modalBack');
    document.getElementById('signinBtn').onclick = ()=> modal.style.display='flex';
    document.getElementById('closeModal').onclick = ()=> modal.style.display='none';
    document.getElementById('doSignIn').onclick = ()=>{
      const em = document.getElementById('email').value;
      if(!em){ alert('Enter email'); return; }
      modal.style.display='none';
      alert('Signed in (demo). In production authenticate via server and store session/token.');
    }

    // init
    renderMovies(moviesData);
    renderShowtimes();
    resetSeats();
  </script>
</body>
</html>
